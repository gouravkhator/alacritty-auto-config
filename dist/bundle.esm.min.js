import r from"path";import o from"yargs/yargs";import{hideBin as i}from"yargs/helpers";import t from"os";import e from"fs";import n from"yamljs";import{execSync as a}from"child_process";var l=/^0x([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/,f=/^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/;function s(r){r=r.trim();if(!/^([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/.test(r))throw new Error("Color code, provided in params, is neither in 3 letter format nor in 6 letter format..");if(3===r.length){for(var o="",i=0;i<=2;i++)o+=r.charAt(i)+r.charAt(i);return o}return r}function d(r){if("string"==typeof r){if(!r||r&&""===r.trim())return;if(r=r.trim(),f.test(r))return"0x"+s(r.substring(1));if(l.test(r))return"0x"+s(r.substring(2));throw new Error("Color code is not provided in hex(0x) or hash(#) format..")}if("number"==typeof r)return"0x"+s(r.toString(16))}var c=globalThis&&globalThis.__assign||function(){return(c=Object.assign||function(r){for(var o,i=1,t=arguments.length;i<t;i++)for(var e in o=arguments[i])Object.prototype.hasOwnProperty.call(o,e)&&(r[e]=o[e]);return r}).apply(this,arguments)};function u(){if("Windows_NT"===t.type())throw new Error("Platform win32 not supported by our app");try{a("which alacritty")}catch(r){throw new Error("Package Not Installed: alacritty is not installed in your system or it's path is not set in your PATH variable, so you cannot use our library..")}var o=r.join(t.homedir(),".config/alacritty/alacritty.yml");return e.existsSync(o)||(e.mkdirSync(r.dirname(o),{recursive:!0}),e.writeFileSync(o,"")),o}function v(r){try{return n.load(r)}catch(r){throw new Error("Cannot load original alacritty config file from the path provided..")}}function m(o,i){var t="user_config_temp",n=r.resolve(t,"alacritty.json");e.mkdirSync(t,{recursive:!0}),e.writeFileSync(n,JSON.stringify(o),"utf8");var l="npx json2yaml '"+n+"' --save -d 8 && mv '"+r.resolve(t,"alacritty.yaml")+"' '"+r.resolve(t,"alacritty.yml")+"' && cp '"+r.resolve(t,"alacritty.yml")+"' '"+i+"' && rm -rf "+t;a(l),console.log("Please close and reopen all windows of alacritty if some effects were not applied..")}function p(r,o,i){var t,e,n,a,l,f,s,u;void 0===r&&(r={});var v=null!==(n=null===(e=null===(t=null==r?void 0:r.colors)||void 0===t?void 0:t.primary)||void 0===e?void 0:e.background)&&void 0!==n?n:"",p=null!==(f=null===(l=null===(a=null==r?void 0:r.colors)||void 0===a?void 0:a.primary)||void 0===l?void 0:l.foreground)&&void 0!==f?f:"",y=null!==(u=null===(s=null==r?void 0:r.font)||void 0===s?void 0:s.size)&&void 0!==u?u:void 0,h=o.primary_bgcolor,g=void 0===h?v:h,b=o.primary_fgcolor,w=void 0===b?p:b,x=o.fontsize,k=void 0===x?y:x;if(g=d(g),w=d(w),k<.1||k>40)throw new Error("Font size provided is not in the range 0.1 to 40.0");var A=c(c({},r),{font:{size:k},colors:{primary:{background:g,foreground:w}}});return m(A,i),A}import.meta.url==="file://"+process.argv[1]&&function(){var t="";try{var e=v(t=u()),n=r.dirname(t),a=function(r){var t,e,n,a,l,f,s,c,u;void 0===r&&(r={});var v="fontsize",m="bgcolor",p="fgcolor",y=10,h="#333333",g="#ffffff";return o(i(process.argv)).usage("Usage: node dist/$0 [options]=[values]\n\nThe options may/may not provided in the CLI. If they are not provided, all the defaults are set.").help("h").version("1.0.0").alias("s",v).alias("b",m).alias("c",p).alias("h","help").alias("v","version").default(v,null!==(n=null===(e=null==r?void 0:r.font)||void 0===e?void 0:e.size)&&void 0!==n?n:y).default(m,null!==(f=null===(l=null===(a=null==r?void 0:r.colors)||void 0===a?void 0:a.primary)||void 0===l?void 0:l.background)&&void 0!==f?f:h).default(p,null!==(u=null===(c=null===(s=null==r?void 0:r.colors)||void 0===s?void 0:s.primary)||void 0===c?void 0:c.foreground)&&void 0!==u?u:g).nargs((t={},t[v]=1,t[m]=1,t[p]=1,t)).describe(v,"Takes font size to be set in alacritty\t[default="+y+"]").describe(m,"Takes primary background color in #ffffff or #fff or 0xfff or 0xffffff format\t[default="+h+"]").describe(p,"Takes primary foreground color in #ffffff or #fff or 0xfff or 0xffffff format\t[default="+g+"]").check((function(r){if(r.s&&(parseFloat(r.s)<=0||parseFloat(r.s)>40))throw new Error("Wrong Arguments: Provided font size "+r.s+" should be within the range of display: 0.1 to 40.0");if(r.b&&void 0===d(r.b))throw new Error("Wrong Arguments: Provided background color "+r.b+" should be in hash or hex format");if(r.c&&void 0===d(r.c))throw new Error("Wrong Arguments: Provided font color "+r.c+" should be in hash or hex format");return!0})).argv}(e);p(e,{fontsize:parseFloat(a.s),primary_bgcolor:a.b,primary_fgcolor:a.c},n)}catch(r){console.error(r)}}();export{u as configInit,p as editConfig,v as readOriginalConfig,m as writeToConfigFile};
